<Window x:Class="ChatboxWpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Chatbox" Height="400" Width="400">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <ListBox x:Name="ChatList" Grid.Row="0" Margin="10" />
        <Grid Grid.Row="1" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Button x:Name="EmojiButton" Grid.Column="0" Content="😊" Width="40" Height="30" Click="EmojiButton_Click"/>
            <Popup x:Name="EmojiPopup" PlacementTarget="{Binding ElementName=EmojiButton}" Placement="Bottom" StaysOpen="False">
                <Border Background="White" BorderBrush="Gray" BorderThickness="2" CornerRadius="6" Width="320" Height="180">
                    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                        <WrapPanel>
                            <!-- Example emojis, add more as needed -->
                            <Button Content="😀" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😁" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😂" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤣" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😃" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😄" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😅" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😆" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😉" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😊" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😋" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😎" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😍" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😘" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥰" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😗" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😙" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😚" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🙂" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤗" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤩" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤔" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤨" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😐" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😑" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😶" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🙄" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😏" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😣" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😥" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😮" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤐" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😯" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😪" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😫" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥱" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😴" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😌" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😛" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😜" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😝" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤤" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😒" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😓" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😔" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😕" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🙃" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤑" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😲" Click="Emoji_Click" Margin="2"/>
                            <Button Content="☹️" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🙁" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😖" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😞" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😟" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😤" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😢" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😭" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😦" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😧" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😨" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😩" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤯" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😬" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😰" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😱" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥵" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥶" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😳" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤪" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😵" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😡" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😠" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤬" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😷" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤒" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤕" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤢" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤮" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤧" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥳" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥺" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤠" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥸" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😇" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤡" Click="Emoji_Click" Margin="2"/>
                            <Button Content="💩" Click="Emoji_Click" Margin="2"/>
                            <Button Content="👻" Click="Emoji_Click" Margin="2"/>
                            <Button Content="💀" Click="Emoji_Click" Margin="2"/>
                            <Button Content="👽" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🎃" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😺" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😸" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😹" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😻" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😼" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😽" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🙀" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😿" Click="Emoji_Click" Margin="2"/>
                            <Button Content="😾" Click="Emoji_Click" Margin="2"/>
                            <Button Content="👍" Click="Emoji_Click" Margin="2"/>
                            <Button Content="👎" Click="Emoji_Click" Margin="2"/>
                            <Button Content="👏" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🙌" Click="Emoji_Click" Margin="2"/>
                            <Button Content="👐" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤲" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🙏" Click="Emoji_Click" Margin="2"/>
                            <Button Content="💪" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🦾" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🦵" Click="Emoji_Click" Margin="2"/>
                            <Button Content="👀" Click="Emoji_Click" Margin="2"/>
                            <Button Content="👋" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤙" Click="Emoji_Click" Margin="2"/>
                            <Button Content="💔" Click="Emoji_Click" Margin="2"/>
                            <Button Content="❤️" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🧡" Click="Emoji_Click" Margin="2"/>
                            <Button Content="💛" Click="Emoji_Click" Margin="2"/>
                            <Button Content="💚" Click="Emoji_Click" Margin="2"/>
                            <Button Content="💙" Click="Emoji_Click" Margin="2"/>
                            <Button Content="💜" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤎" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🖤" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🤍" Click="Emoji_Click" Margin="2"/>
                            <Button Content="💯" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🎉" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🎊" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🎁" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🎈" Click="Emoji_Click" Margin="2"/>
                            <Button Content="⭐" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🌟" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🔥" Click="Emoji_Click" Margin="2"/>
                            <Button Content="✨" Click="Emoji_Click" Margin="2"/>
                            <Button Content="⚡" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🌈" Click="Emoji_Click" Margin="2"/>
                            <Button Content="☀️" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🌙" Click="Emoji_Click" Margin="2"/>
                            <Button Content="☁️" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🌧️" Click="Emoji_Click" Margin="2"/>
                            <Button Content="⛄" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🌊" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍀" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🌹" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🌻" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🌺" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍁" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍂" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍃" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍎" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍉" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍓" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍒" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍑" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥭" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍍" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥥" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥝" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍅" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥑" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍆" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥔" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥕" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🌽" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🌶️" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥒" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥬" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥦" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🧄" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🧅" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍞" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥐" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥯" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥖" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥨" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🧀" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥚" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍳" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥞" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🧇" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥓" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥩" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍗" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍖" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🦴" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🌭" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍔" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍟" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍕" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥪" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥙" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🧆" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🌮" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🌯" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥗" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍿" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🧈" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍱" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍘" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍙" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍚" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍛" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍜" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍝" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍠" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍢" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍣" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍤" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍥" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥮" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍡" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥟" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥠" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥡" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🦪" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍦" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍧" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍨" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍩" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍪" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🎂" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍰" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🧁" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥧" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍫" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍬" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍭" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍮" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍯" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍼" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥤" Click="Emoji_Click" Margin="2"/>
                            <Button Content="☕" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍵" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🧃" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥛" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍺" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍻" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥂" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍷" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🥃" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍸" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍹" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🍾" Click="Emoji_Click" Margin="2"/>
                            <Button Content="🧊" Click="Emoji_Click" Margin="2"/>
                        </WrapPanel>
                    </ScrollViewer>
                </Border>
            </Popup>

            <TextBox x:Name="MessageInput" Grid.Column="1" Height="30" 
                     Margin="10,0,0,0" VerticalContentAlignment="Center"/>

            <Button Grid.Column="2" Content="Send" Width="80" Height="30" 
                    Margin="10,0,0,0" Click="Send_Click"/>

            <Button Grid.Column="3" Width="40" Height="30" 
                    Margin="10,0,0,0" Click="SendFile_Click" 
                    FontSize="16" Content="📎"/>

        </Grid>

        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="10" VerticalAlignment="Center">
            <ProgressBar x:Name="FileProgress" Width="200" Height="20" 
                         Minimum="0" Maximum="100" Value="0" 
                         Visibility="Collapsed"/>
            <TextBlock x:Name="FileProgressText" Margin="10,0,0,0" 
                       VerticalAlignment="Center" Foreground="Gray"
                       Visibility="Collapsed"/>
        </StackPanel>
    </Grid>
</Window>